(function(a,r){typeof exports=="object"&&typeof module<"u"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(a=typeof globalThis<"u"?globalThis:a||self,r(a.JSComponent={}))})(this,function(a){"use strict";var r=document.createElement("style");r.textContent=`[data-component=card]{padding:20px;border-radius:4px;border:1px solid #ebeef5;background-color:#fff;overflow:hidden;color:#303133;transition:.3s}[data-component=card].always-shadow,[data-component=card].hover-shadow:hover{box-shadow:0 2px 12px #0000001a}
`,document.head.appendChild(r);const S="",f=Object.prototype.toString;function p(s){return f.call(s).slice(8,-1).toLowerCase()}function c(s){return y(s)?s:p(s)?document.querySelector(s):null}function y(s){return s instanceof HTMLElement}class u{constructor(){this._events={},this._nativeEventOptionMap=new Map}on(t,e,i=!1,n=!1){this._events[t]=this._events[t]||[],this._events[t].push(e),i&&(this.el.addEventListener(t,e,n),(this._nativeEventOptionMap.get(e)||[]).push(n))}emit(t,...e){(this._events[t]||[]).forEach(n=>n(...e))}off(t,e,i=!1){if(!this._events[t])return;const n=this._events[t];p(e)?(i&&this.el.removeEventListener(t,n,this._nativeEventOptionMap.get(e).shift()),this._events[t]=n.filter(o=>o!==e)):(i&&n.forEach(o=>this.el.removeEventListener(t,o,this._nativeEventOptionMap.get(o).shift())),Reflect.deleteProperty(this._events,t))}}class v extends u{constructor(t={el:"",class:"",shadow:"always"}){if(super(),this.options=t,this.el=c(t.el),!this.el)throw new TypeError("please pass a valid element or selector.");this._init()}_init(){this._render()}_render(){this.el.className+=this.options.class||"",this.el.dataset.component="card";const t=this.options.shadow;this.el.className+=t==="always"?" always-shadow":t==="hover"?" hover-shadow":""}destroy(){this.el&&this.el.remove(),this.el=this.options=null}}function _(s={}){const{type:t="GET",url:e,headers:i,data:n=null,params:o={},async:h=!0,user:d=null,password:C=null,timeout:k,onProgress:L=function(){},onTimeout:O=function(){}}=s,b=new Promise((T,x)=>{}),l=new XMLHttpRequest,I=m(e,o);return l.open(t,I,h,d,C),U(l,k,O),w(l,i),l.onreadystatechange=function(){l.readyState===XMLHttpRequest.DONE&&l.status===200&&resolve(l.response)},l.onerror=reject,l.onprogress=L,l.send(n),b}function m(s,t){const e=[];for(const i in t)t.hasOwnProperty(i)&&queryStr.push(`${i}=${t[i]}`);return e.length?`${s}?${e.join("&")}`:s}function w(s,t){for(const e in t)t.hasOwnProperty(e)&&s.setRequestHeader(e,t[e])}function U(s,t,e){p(t)&&(s.timeout=t,s.ontimeout=e)}async function g(s){const t=[];try{t[1]=await s}catch(e){t[0]=e}return t}class E extends u{constructor(t={}){if(super(),this.options=t,this.fileList=[],this.el=c(t.el),!this.el)throw new TypeError("please pass a valid element or selector.");this._handleUploadClick=this.handleUploadClick.bind(this),this._init()}_init(){this._render(),this._bindEvent()}_render(){this.oUploadInput=document.createElement("input"),this.oUploadInput.type="file",this.options.accept&&(this.oUploadInput.accept=this.options.accept),this.oUploadInput.multiple=!!this.options.multiple,this.oUploadInput.style.display="none",this.oUploadInput.onclick=t=>t.stopPropagation(),this.oUploadInput.onchange=this.handleFileUpload.bind(this),this.el.appendChild(this.oUploadInput)}_bindEvent(){this.on("click",this._handleUploadClick,!0)}handleUploadClick(){this.oUploadInput.click()}handleFileUpload(t){console.log(this,t,t.target.files);const{files:e}=t.target.files;this.files=e,this.fileList.push(...e),this.emit("on-change",e,this.fileList),this.handleUpload()}async handleUpload(){const{httpRequest:t,action:e,headers:i,data:n}=this.options;if(t){t(this.files);return}const o=new FormData;o.append("file",this.files),o.append("data",JSON.stringify(n));const[h,d]=await g(_({type:"POST",url:e,data:o,headers:i}));h?this.emit("on-error",h,this.files,this.fileList):this.emit("on-success",d,this.files,this.fileList)}reset(){this.el=null,this.files=null,this.oUploadInput=null,this.options={},this.fileList=[]}destroy(){this.off("click",this._handleUploadClick,!0),this.oUploadInput.onclick=null,this.el.remove(),this.reset()}}a.Card=v,a.Upload=E,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
